{"version":3,"sources":["webpack:///src/components/upload/image-upload.vue","webpack:///./src/components/upload/image-upload.vue?5a08","webpack:///./src/components/upload/image-upload.vue","webpack:///src/pages/user/user.vue","webpack:///./src/pages/user/user.vue?475a","webpack:///./src/pages/user/user.vue","webpack:///./src/api/user.js"],"names":["image_upload","name","props","value","Array","data","uploadList","previewModal","hiddenUpload","uploadPath","mounted","_this","this","$nextTick","length","push","methods","handleView","imgName","$emit","modelVisibleChange","status","handleBeforeUpload","file","_this2","console","log","size","$Notice","warning","title","desc","reader","FileReader","readAsDataURL","onloadend","e","url","result","handleRemove","splice","indexOf","watch","upload_image_upload","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","key","attrs","src","_v","type","nativeOn","click","$event","_e","ref","staticStyle","display","width","action","accept","show-upload-list","before-upload","height","line-height","_m","on","on-visible-change","model","callback","$$v","expression","staticRenderFns","components_upload_image_upload","__webpack_require__","normalizeComponent","ssrContext","user_user","queryName","queryAuth","tableLoading","userModal","modalLoading","modalType","userForm","id","username","password","auth","oldPwd","newPwd","comfirmPwd","userFormRule","required","message","trigger","tableColumn","tableData","total","currentPage","pageSize","authList","label","created","_getColumn","_getUser","table_column","userTableColumn","params","Object","user","then","res","success","concat","toConsumableArray_default","list","pagination","$Message","error","msg","onCurrentPageChange","page","onPageSizeChange","add","resetForm","query","edit","row","index","_id","String","avator","remove","_this3","addOrEdit","_this4","$refs","validate","valid","formData","FormData","append","userFormObj","resetFields","showUserModel","components","baseTable","base_table","imageUpload","pages_user_user","gutter","sm","md","lg","placeholder","_s","margin-right","icon","shape","rules","label-width","prop","disabled","$set","showParentModel","slot","loading","columnList","on-edit","on-delete","on-page-change","on-size-change","user_Component","user_normalizeComponent","__webpack_exports__","_ref","_ref2","_ref3","_ref4","_ref5","qs","require","getUser","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","mark","_callee","wrap","_context","prev","next","ax","method","stringify","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","abrupt","sent","stop","_callee2","_context2","_x2","apply","arguments","deleteUser","_callee3","_context3","_x3","addOrUpload","_callee4","_context4","headers","Content-Type","_x4","editOrUpload","_callee5","_context5","_x5"],"mappings":"gLAyCAA,GACAC,KAAA,eACAC,OAGAC,MAAAC,OAEAC,KAPA,WAQA,OACAC,cACAC,cAAA,EACAC,cAAA,EACAC,WAAA,0CAKAC,QAjBA,WAiBA,IAAAC,EAAAC,KACAA,KAAAC,UAAA,WAEAF,EAAAR,MAAAW,SACAH,EAAAL,WAAAS,KAAAJ,EAAAR,OACAQ,EAAAH,cAAA,MAIAQ,SAEAC,WAFA,SAEAhB,GACAW,KAAAM,QAAAjB,EACAW,KAAAL,cAAA,EACAK,KAAAO,MAAA,uBAGAC,mBARA,SAQAC,GACAT,KAAAO,MAAA,mBAAAE,IAKAC,mBAdA,SAcAC,GAAA,IAAAC,EAAAZ,KAEA,GADAa,QAAAC,IAAAH,GACAA,EAAAI,KAAA,IAKA,OAJAf,KAAAgB,QAAAC,SACAC,MAAA,WACAC,KAAA,MAAAR,EAAAtB,KAAA,qBAEA,EAEAW,KAAAN,cACA,IAAA0B,EAAA,IAAAC,WAYA,OARAD,EAAAE,cAAAX,GACAS,EAAAG,UAAA,SAAAC,GACAb,EAAAc,IAAAL,EAAAM,OAEAd,EAAArB,MAAAY,KAAAQ,IAEAE,QAAAC,IAAAd,KAAAT,OACAS,KAAAJ,cAAA,GACA,GAGA+B,aAvCA,SAuCAhB,GACAX,KAAAN,WAAAkC,OAAA5B,KAAAN,WAAAmC,QAAAlB,GAAA,GACAX,KAAAJ,cAAA,IAIAkC,OACAvC,MADA,SACAE,GAEAA,EAAAS,QACAF,KAAAN,WAAAD,EACAO,KAAAJ,cAAA,IAEAI,KAAAN,cACAM,KAAAJ,cAAA,MCrHemC,GADEC,OAFjB,WAA0B,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iBAA2BL,EAAAM,GAAAN,EAAA,oBAAAO,GAAyC,OAAAJ,EAAA,OAAiBK,IAAAD,EAAAnD,KAAAiD,YAAA,iBAAyCE,EAAA,KAAAJ,EAAA,OAAwBM,OAAOC,IAAAH,EAAAf,OAAgBQ,EAAAW,GAAA,KAAAR,EAAA,OAAwBE,YAAA,uBAAiCF,EAAA,QAAaM,OAAOG,KAAA,mBAAyBC,UAAWC,MAAA,SAAAC,GAAyBf,EAAA5B,WAAAmC,EAAAnD,UAA4B4C,EAAAW,GAAA,KAAAR,EAAA,QAAyBM,OAAOG,KAAA,qBAA2BC,UAAWC,MAAA,SAAAC,GAAyBf,EAAAN,aAAAa,QAAyB,IAAAP,EAAAgB,MAAA,KAAoBhB,EAAAW,GAAA,KAAAX,EAAArC,aAA4XqC,EAAAgB,KAA5Xb,EAAA,UAA+Cc,IAAA,SAAAC,aAA0BC,QAAA,eAAAC,MAAA,QAAwCX,OAAQY,OAAArB,EAAApC,WAAAgD,KAAA,OAAAU,OAAA,oBAAAC,oBAAA,EAAAC,gBAAAxB,EAAAvB,sBAAoI0B,EAAA,OAAYe,aAAaE,MAAA,OAAAK,OAAA,OAAAC,cAAA,UAAqDvB,EAAA,QAAaM,OAAOG,KAAA,SAAA9B,KAAA,SAA6B,KAAAkB,EAAAW,GAAA,KAAAX,EAAA2B,GAAA,GAAA3B,EAAAW,GAAA,KAAAR,EAAA,SAA+DM,OAAOxB,MAAA,QAAe2C,IAAKC,oBAAA7B,EAAAzB,oBAA2CuD,OAAQxE,MAAA0C,EAAA,aAAA+B,SAAA,SAAAC,GAAkDhC,EAAAtC,aAAAsE,GAAqBC,WAAA,kBAA4BjC,EAAA,aAAAG,EAAA,OAA+Be,aAAaE,MAAA,SAAgBX,OAAQC,IAAAV,EAAAvC,WAAA,GAAA+B,OAA6BQ,EAAAgB,QAAA,IAErwCkB,iBADjB,WAAoC,IAAajC,EAAblC,KAAamC,eAA0BC,EAAvCpC,KAAuCqC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAgBE,YAAA,eAAyBF,EAAA,MAAxGpC,KAAwG4C,GAAA,iBAAxG5C,KAAwG4C,GAAA,KAAAR,EAAA,MAAxGpC,KAAwG4C,GAAA,sBAAxG5C,KAAwG4C,GAAA,KAAAR,EAAA,MAAxGpC,KAAwG4C,GAAA,uCCE5I,IAuBewB,EAvBUC,EAAQ,OAcjCC,CACElF,EACA2C,GATF,EAVA,SAAAwC,GACEF,EAAQ,SAaV,KAEA,MAUgC,QCoFhCG,GACAnF,KAAA,OACAI,KAFA,WAGA,OACAgF,UAAA,GACAC,UAAA,GACAC,cAAA,EACAC,WAAA,EACAC,cAAA,EACAC,UAAA,EACAC,UAAAC,GAAA,GAAAC,SAAA,GAAAC,SAAA,GAAAC,KAAA,IAAAC,OAAA,GAAAC,OAAA,GAAAC,WAAA,IACAC,cACAN,WAAAO,UAAA,EAAAC,QAAA,UAAAC,QAAA,SACAR,WAAAM,UAAA,EAAAC,QAAA,SAAAC,QAAA,SACAN,SAAAI,UAAA,EAAAC,QAAA,WAAAC,QAAA,SACAL,SAAAG,UAAA,EAAAC,QAAA,UAAAC,QAAA,SACAJ,aAAAE,UAAA,EAAAC,QAAA,WAAAC,QAAA,SACAP,OAAAK,UAAA,EAAAC,QAAA,QAAAC,QAAA,YAEAC,eACAC,aACAC,MAAA,EACAC,YAAA,EACAC,SAAA,GACAC,WACAzG,MAAA,IAAA0G,MAAA,OAAA1G,MAAA,IAAA0G,MAAA,OAAA1G,MAAA,IAAA0G,MAAA,QAAA1G,MAAA,IAAA0G,MAAA,UAEAtG,cAAA,EACAC,cAAA,EACAF,cACAG,WAAA,0CAGAqG,QAjCA,WAkCAlG,KAAAmG,cAEArG,QApCA,WAoCA,IAAAC,EAAAC,KACAA,KAAAC,UAAA,WACAF,EAAAqG,cAQAhG,SAEA+F,WAFA,WAGAnG,KAAA2F,YAAAU,EAAA,EAAAC,iBAEAF,SALA,WAKA,IAAAxF,EAAAZ,KACAA,KAAA2E,cAAA,EACA,IAAA4B,GAAAT,YAAA9F,KAAA8F,YAAAC,SAAA/F,KAAA+F,SAAAtB,UAAAzE,KAAAyE,UAAAC,UAAA1E,KAAA0E,WACG8B,OAAAC,EAAA,EAAAD,CAAHD,GAAAG,KAAA,SAAAC,GAEAA,EAAAlH,KAAAmH,SACAhG,EAAAgF,aAAAiB,OAAAC,IAAAH,EAAAlH,UAAAsH,OACAnG,EAAAiF,MAAAc,EAAAlH,UAAAuH,WAAAnB,MACAjF,EAAAkF,YAAAa,EAAAlH,UAAAuH,WAAAlB,YACAlF,EAAAmF,SAAAY,EAAAlH,UAAAuH,WAAAjB,UAEAnF,EAAAqG,SAAAC,MAAAP,EAAAlH,KAAA0H,KAEAvG,EAAA+D,cAAA,KAIAyC,oBAtBA,SAsBAC,GACArH,KAAA8F,YAAAuB,EACArH,KAAAoG,YAGAkB,iBA3BA,SA2BAvG,GACAf,KAAA8F,YAAA,EACA9F,KAAA+F,SAAAhF,EACAf,KAAAoG,YAOAmB,IArCA,WAsCAvH,KAAA4E,WAAA,EACA5E,KAAA8E,UAAA,GAGAtE,mBA1CA,SA0CAC,GACAA,GAAAT,KAAAwH,aAGAC,MA9CA,WA+CAzH,KAAAoG,YAGAsB,KAlDA,SAkDAC,EAAAC,GAEA5H,KAAA4E,WAAA,EACA5E,KAAA+E,SAAAC,GAAA2C,EAAAE,IACA7H,KAAA+E,SAAAE,SAAA0C,EAAA1C,SACAjF,KAAA+E,SAAAI,KAAA2C,OAAAH,EAAAxC,MACAwC,EAAAI,SACA/H,KAAAN,WAAAS,MACAd,KAAAsI,EAAA1C,SACAxD,IAAA,yBAAAkG,EAAAI,SAEA/H,KAAAJ,cAAA,GAEAI,KAAA8E,UAAA,GAGAkD,OAlEA,SAkEAL,EAAAC,GAAA,IAAAK,EAAAjI,KACAwG,OAAAC,EAAA,EAAAD,CAAAmB,EAAAE,KAAAnB,KAAA,SAAAC,GACAA,EAAAlH,KAAAmH,SACAqB,EAAA7B,WACA6B,EAAAhB,SAAAL,QAAAD,EAAAlH,KAAA0H,MAEAc,EAAAhB,SAAAL,QAAAD,EAAAlH,KAAA0H,QAKAe,UA7EA,WA6EA,IAAAC,EAAAnI,KAcAA,KAAAoI,MAAA,YAAAC,SAAA,SAAAC,GACA,GAAAA,EAAA,CACAH,EAAAtD,cAAA,EACA,IAAA0D,EAAA,IAAAC,SACAL,EAAAzI,WAAAQ,QACAqI,EAAAE,OAAA,OAAAN,EAAAzI,WAAA,IAEA6I,EAAAE,OAAA,WAAAN,EAAApD,SAAAE,UACAsD,EAAAE,OAAA,OAAAN,EAAApD,SAAAI,MACA,IAAAgD,EAAArD,WACAyD,EAAAE,OAAA,WAAAN,EAAApD,SAAAG,UACMsB,OAAAC,EAAA,EAAAD,CAAN+B,GAAA7B,KAAA,SAAAC,GACAA,EAAAlH,KAAAmH,SACAuB,EAAAtD,cAAA,EACAsD,EAAAvD,WAAA,EACAuD,EAAAX,YACAW,EAAA/B,WACA+B,EAAAlB,SAAAL,QAAAD,EAAAlH,KAAA0H,OAEAgB,EAAAtD,cAAA,EACAsD,EAAAlB,SAAAC,MAAAP,EAAAlH,KAAA0H,UAIAoB,EAAAE,OAAA,KAAAN,EAAApD,SAAAC,IACAuD,EAAAE,OAAA,SAAAN,EAAApD,SAAAK,QACAmD,EAAAE,OAAA,SAAAN,EAAApD,SAAAM,QACAkD,EAAAE,OAAA,aAAAN,EAAApD,SAAAO,YACMkB,OAAAC,EAAA,EAAAD,CAAN+B,GAAA7B,KAAA,SAAAC,GACA9F,QAAAC,IAAA6F,GACAA,EAAAlH,KAAAmH,SACAuB,EAAAtD,cAAA,EACAsD,EAAAvD,WAAA,EACAuD,EAAAX,YACAW,EAAA/B,WACA+B,EAAAlB,SAAAL,QAAAD,EAAAlH,KAAA0H,OAEAgB,EAAAtD,cAAA,EACAsD,EAAAlB,SAAAC,MAAAP,EAAAlH,KAAA0H,cAKAgB,EAAAlB,SAAAC,MAAA,iBAIAM,UA1IA,WA2IAxH,KAAAoI,MAAAM,YAAAC,cACA3I,KAAA+E,SAAAI,KAAA,IACAnF,KAAA+E,SAAAG,SAAA,GACAlF,KAAA+E,SAAAC,GAAA,GACAhF,KAAA+E,SAAAK,OAAA,GACApF,KAAA+E,SAAAM,OAAA,GACArF,KAAA+E,SAAAO,WAAA,GACAtF,KAAAJ,cAAA,EACAI,KAAAN,eAKAkJ,cAxJA,SAwJArJ,GACAS,KAAA4E,UAAArF,IA2CAsJ,YACAC,UAAAC,EAAA,EACAC,YAAA5E,IC/Ve6E,GADEjH,OAFP,WAAgB,IAAAC,EAAAjC,KAAakC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYM,OAAOwG,OAAA,MAAa9G,EAAA,OAAYM,OAAOyG,GAAA,EAAAC,GAAA,EAAAC,GAAA,KAAsBjH,EAAA,SAAcM,OAAO4G,YAAA,WAAwBvF,OAAQxE,MAAA0C,EAAA,UAAA+B,SAAA,SAAAC,GAA+ChC,EAAAwC,UAAAR,GAAkBC,WAAA,gBAAyB,GAAAjC,EAAAW,GAAA,KAAAR,EAAA,OAA4BM,OAAOyG,GAAA,EAAAC,GAAA,EAAAC,GAAA,KAAsBjH,EAAA,UAAeM,OAAO4G,YAAA,WAAwBvF,OAAQxE,MAAA0C,EAAA,UAAA+B,SAAA,SAAAC,GAA+ChC,EAAAyC,UAAAT,GAAkBC,WAAA,cAAyBjC,EAAAM,GAAAN,EAAA,kBAAAO,GAAsC,OAAAJ,EAAA,UAAoBK,IAAAD,EAAAjD,MAAAmD,OAAsBnD,MAAAiD,EAAAjD,SAAoB0C,EAAAW,GAAAX,EAAAsH,GAAA/G,EAAAyD,cAA+B,GAAAhE,EAAAW,GAAA,KAAAR,EAAA,OAA6BM,OAAOyG,GAAA,EAAAC,GAAA,EAAAC,GAAA,KAAsBjH,EAAA,UAAee,aAAaqG,eAAA,QAAsB9G,OAAQG,KAAA,UAAA4G,KAAA,SAAAC,MAAA,UAAkD7F,IAAKd,MAAAd,EAAAwF,SAAmBxF,EAAAW,GAAA,QAAAX,EAAAW,GAAA,KAAAR,EAAA,UAA0CM,OAAOG,KAAA,UAAA4G,KAAA,OAAAC,MAAA,UAAgD7F,IAAKd,MAAAd,EAAAsF,OAAiBtF,EAAAW,GAAA,QAAAX,EAAAW,GAAA,KAAAR,EAAA,SAAyCM,OAAOxB,MAAA,IAAAe,EAAA6C,UAAA,iBAA0CjB,IAAKC,oBAAA7B,EAAAzB,oBAA2CuD,OAAQxE,MAAA0C,EAAA,UAAA+B,SAAA,SAAAC,GAA+ChC,EAAA2C,UAAAX,GAAkBC,WAAA,eAAyB9B,EAAA,QAAac,IAAA,cAAAR,OAAyBqB,MAAA9B,EAAA8C,SAAA4E,MAAA1H,EAAAsD,aAAAqE,cAAA,OAAiExH,EAAA,YAAiBM,OAAOuD,MAAA,MAAA4D,KAAA,cAAiCzH,EAAA,SAAcM,OAAOG,KAAA,OAAAyG,YAAA,SAAAQ,SAAA,IAAA7H,EAAA6C,WAA6Ef,OAAQxE,MAAA0C,EAAA8C,SAAA,SAAAf,SAAA,SAAAC,GAAuDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,WAAAd,IAAwCC,WAAA,wBAAiC,GAAAjC,EAAAW,GAAA,SAAAX,EAAA6C,UAAA1C,EAAA,YAAuDM,OAAOuD,MAAA,KAAA4D,KAAA,cAAgCzH,EAAA,SAAcM,OAAOG,KAAA,WAAAyG,YAAA,SAAwCvF,OAAQxE,MAAA0C,EAAA8C,SAAA,SAAAf,SAAA,SAAAC,GAAuDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,WAAAd,IAAwCC,WAAA,wBAAiC,GAAA9B,EAAA,OAAAA,EAAA,YAA+BM,OAAOuD,MAAA,OAAA4D,KAAA,YAAgCzH,EAAA,SAAcM,OAAOG,KAAA,WAAAyG,YAAA,WAA0CvF,OAAQxE,MAAA0C,EAAA8C,SAAA,OAAAf,SAAA,SAAAC,GAAqDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,SAAAd,IAAsCC,WAAA,sBAA+B,GAAAjC,EAAAW,GAAA,KAAAR,EAAA,YAAiCM,OAAOuD,MAAA,MAAA4D,KAAA,YAA+BzH,EAAA,SAAcM,OAAOG,KAAA,WAAAyG,YAAA,UAAyCvF,OAAQxE,MAAA0C,EAAA8C,SAAA,OAAAf,SAAA,SAAAC,GAAqDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,SAAAd,IAAsCC,WAAA,sBAA+B,GAAAjC,EAAAW,GAAA,KAAAR,EAAA,YAAiCM,OAAOuD,MAAA,OAAA4D,KAAA,gBAAoCzH,EAAA,SAAcM,OAAOG,KAAA,WAAAyG,YAAA,UAAyCvF,OAAQxE,MAAA0C,EAAA8C,SAAA,WAAAf,SAAA,SAAAC,GAAyDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,aAAAd,IAA0CC,WAAA,0BAAmC,OAAAjC,EAAAW,GAAA,KAAAR,EAAA,YAAqCM,OAAOuD,MAAA,KAAA4D,KAAA,UAA4BzH,EAAA,UAAeM,OAAO4G,YAAA,SAAsBvF,OAAQxE,MAAA0C,EAAA8C,SAAA,KAAAf,SAAA,SAAAC,GAAmDhC,EAAA8H,KAAA9H,EAAA8C,SAAA,OAAAd,IAAoCC,WAAA,mBAA6B9B,EAAA,UAAeM,OAAOnD,MAAA,OAAa0C,EAAAW,GAAA,WAAAX,EAAAW,GAAA,KAAAR,EAAA,UAA6CM,OAAOnD,MAAA,OAAa0C,EAAAW,GAAA,SAAAX,EAAAW,GAAA,KAAAR,EAAA,UAA2CM,OAAOnD,MAAA,OAAa0C,EAAAW,GAAA,gBAAAX,EAAAW,GAAA,KAAAR,EAAA,YAAoDM,OAAOuD,MAAA,KAAA4D,KAAA,YAA8BzH,EAAA,eAAoByB,IAAImG,gBAAA/H,EAAA2G,eAAoC7E,OAAQxE,MAAA0C,EAAA,WAAA+B,SAAA,SAAAC,GAAgDhC,EAAAvC,WAAAuE,GAAmBC,WAAA,iBAA0B,OAAAjC,EAAAW,GAAA,KAAAR,EAAA,OAAgCM,OAAOuH,KAAA,UAAgBA,KAAA,WAAe7H,EAAA,UAAeM,OAAOG,KAAA,QAAcgB,IAAKd,MAAA,SAAAC,GAAyBf,EAAA2C,WAAA,MAAsB3C,EAAAW,GAAA,QAAAX,EAAAW,GAAA,KAAAR,EAAA,UAA0CM,OAAOG,KAAA,UAAAqH,QAAAjI,EAAA4C,cAA4ChB,IAAKd,MAAAd,EAAAiG,aAAuBjG,EAAAW,GAAA,wBAAAX,EAAAW,GAAA,KAAAR,EAAA,aAA6DM,OAAOyH,WAAAlI,EAAA0D,YAAAE,MAAA5D,EAAA4D,MAAAC,YAAA7D,EAAA6D,YAAAC,SAAA9D,EAAA8D,SAAAmE,QAAAjI,EAAA0C,cAAgId,IAAKuG,UAAAnI,EAAAyF,KAAA2C,YAAApI,EAAA+F,OAAAsC,iBAAArI,EAAAmF,oBAAAmD,iBAAAtI,EAAAqF,kBAAyHvD,OAAQxE,MAAA0C,EAAA,UAAA+B,SAAA,SAAAC,GAA+ChC,EAAA2D,UAAA3B,GAAkBC,WAAA,gBAAyB,IAE77HC,oBCChC,IAcIqG,EAdqBnG,EAAQ,OAcjBoG,CACdjG,EACAyE,GAT6B,EAV/B,SAAoB1E,GAClBF,EAAQ,SAaS,kBAEU,MAUdqG,EAAA,QAAAF,EAAiB,2NCjBhCG,EAYAC,EAUAC,EAQAC,EAUAC,6EAhDIC,EAAKC,EAAQ,QAoBVC,GAZPP,EAAAQ,IAAAC,EAAAC,EAAAC,KAAO,SAAAC,EAAuB9L,GAAvB,IAAAgC,EAAA,OAAA2J,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACFlK,EAAM,WADJgK,EAAAE,KAAA,EAEOC,aACZnK,MACAoK,OAAQ,OAERpM,KAAMuL,EAAGc,UAAHC,OAAiBtM,MANlB,cAAAgM,EAAAO,OAAA,SAAAP,EAAAQ,MAAA,wBAAAR,EAAAS,SAAAX,EAAAvL,SAYP4K,EAAAO,IAAAC,EAAAC,EAAAC,KAAO,SAAAa,EAAuB5F,GAAvB,OAAA6E,EAAAC,EAAAG,KAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAT,MAAA,cAAAS,EAAAT,KAAA,EACOC,aACZnK,IAAK,WACLoK,OAAQ,MAERtF,cAAYA,KALP,cAAA6F,EAAAJ,OAAA,SAAAI,EAAAH,MAAA,wBAAAG,EAAAF,SAAAC,EAAAnM,SAAP,SAAAqM,GAAA,OAAAzB,EAAA0B,MAAAtM,KAAAuM,aAUOC,GAAP3B,EAAAM,IAAAC,EAAAC,EAAAC,KAAO,SAAAmB,EAA0BhN,GAA1B,OAAA2L,EAAAC,EAAAG,KAAA,SAAAkB,GAAA,cAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,cAAAe,EAAAf,KAAA,EACOC,aACZnK,mBAAoBhC,EACpBoM,OAAQ,WAHH,cAAAa,EAAAV,OAAA,SAAAU,EAAAT,MAAA,wBAAAS,EAAAR,SAAAO,EAAAzM,SAAP,SAAA2M,GAAA,OAAA9B,EAAAyB,MAAAtM,KAAAuM,aAQOK,GAAP9B,EAAAK,IAAAC,EAAAC,EAAAC,KAAO,SAAAuB,EAA2BpN,GAA3B,OAAA2L,EAAAC,EAAAG,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAnB,MAAA,cAAAmB,EAAAnB,KAAA,EACOC,aACZmB,SAAWC,eAAgB,uBAC3BvL,mBACAoK,OAAQ,OACRpM,KAAMA,IALD,cAAAqN,EAAAd,OAAA,SAAAc,EAAAb,MAAA,wBAAAa,EAAAZ,SAAAW,EAAA7M,SAAP,SAAAiN,GAAA,OAAAnC,EAAAwB,MAAAtM,KAAAuM,aAUOW,GAAPnC,EAAAI,IAAAC,EAAAC,EAAAC,KAAO,SAAA6B,EAA4B1N,GAA5B,OAAA2L,EAAAC,EAAAG,KAAA,SAAA4B,GAAA,cAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,cAAAyB,EAAAzB,KAAA,EACOC,aACZmB,SAAWC,eAAgB,uBAC3BvL,oBACAoK,OAAQ,MACRpM,KAAMA,IALD,cAAA2N,EAAApB,OAAA,SAAAoB,EAAAnB,MAAA,wBAAAmB,EAAAlB,SAAAiB,EAAAnN,SAAP,SAAAqN,GAAA,OAAAtC,EAAAuB,MAAAtM,KAAAuM","file":"static/js/4.31947df7dce63c42eafb.js","sourcesContent":["<template>\r\n\t<div class=\"image-upload\">\r\n    <div class=\"preview-list\" v-for=\"item in uploadList\" :key=\"item.name\">\r\n      <!-- <template v-if=\"item.status === 'finished'\"> -->\r\n      <template v-if=\"item.url\">\r\n        <img :src=\"item.url\">\r\n        <div class=\"preview-list-cover\">\r\n          <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.name)\"></Icon>\r\n          <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n        </div>\r\n      </template>\r\n      <!-- <template v-else>\r\n        <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n      </template> -->\r\n    </div>\r\n    <!-- :data=\"userForm\" -->\r\n    <Upload\r\n      v-if=\"!hiddenUpload\"\r\n      :action=\"uploadPath\"\r\n      ref=\"upload\"\r\n      type=\"drag\"\r\n      accept=\".jpg, .jpeg, .png\"\r\n      :show-upload-list=\"false\"\r\n      :before-upload=\"handleBeforeUpload\"\r\n      style=\"display: inline-block;width:78px;\">\r\n      <div style=\"width: 78px;height:78px;line-height: 78px;\">\r\n        <Icon type=\"camera\" size=\"20\"></Icon>\r\n      </div>\r\n    </Upload>\r\n    <ul class=\"upload-tip\">\r\n      <li>每次只能上传1张图片。</li>\r\n      <li>每个文件大小不超过 500kb。</li>\r\n      <li>文件必须是 jpg 、png 或 jpeg 格式的图片。</li>\r\n    </ul>\r\n    <Modal title=\"头像预览\" v-model=\"previewModal\" @on-visible-change=\"modelVisibleChange\">\r\n      <img :src=\"uploadList[0].url\" v-if=\"previewModal\" style=\"width: 500px;\">\r\n    </Modal>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t  name: 'image-upload',\r\n\t  props: {\r\n      // 通过v-model传来的数据默认绑定在value里\r\n      // 父元素的uploadList，主要用来获取用户选择的图片，以及控制上传选择按钮的显示隐藏\r\n      value: Array  // 存储上传文件\r\n\t  },\r\n\t  data(){\r\n\t  \treturn {\r\n        uploadList: [], // 只做预览/编辑默认显示图片\r\n        previewModal: false,\r\n        hiddenUpload: false,\r\n        uploadPath: `${process.env.BASE_API}/api/addOrUpload`\r\n\t  \t}\r\n\t  },\r\n\t  // created () {\r\n    // },\r\n    mounted(){\r\n    \tthis.$nextTick(()=>{\r\n        // this.uploadList = this.$refs.upload.fileList // 存储上传文件对象\r\n        if(this.value.length){\r\n          this.uploadList.push(this.value)\r\n          this.hiddenUpload = true\r\n        }\r\n    \t})\r\n    },\r\n    methods:{\r\n      // 上传图片预览\r\n      handleView (name) {\r\n        this.imgName = name\r\n        this.previewModal = true\r\n        this.$emit('showParentModel', false)\r\n      },\r\n      // 预览窗口切换\r\n      modelVisibleChange(status){\r\n        this.$emit('showParentModel', status ? false : true)\r\n      },\r\n      // 图片上传\r\n      // 绑定 before-upload，并返回false，可以阻止默认上传流程，实现手动控制文件上传\r\n      // 手动上传导致iview的upload组件before-upload后面触发的事件都无法执行\r\n      handleBeforeUpload(file){\r\n        console.log(file)\r\n        if(file.size > 500*1000){\r\n          this.$Notice.warning({\r\n            title: '超出文件大小限制',\r\n            desc: '文件 ' + file.name + ' 太大，不能超过 500kb。'\r\n          })\r\n          return false\r\n        }\r\n        this.uploadList = []\r\n        let reader = new FileReader() // 读取文件对象\r\n        // readAsDataURL 方法用于读取指定 Blob 或 File 的内容\r\n        // 当读操作完成，readyState 变为 DONE，loadend 被触发，此时 result 属性包含数据：URL（以 base64 编码的字符串表示文件的数据）\r\n        // 读取文件作为 URL 可访问地址\r\n        reader.readAsDataURL(file)\r\n        reader.onloadend = e => {\r\n          file.url = reader.result\r\n          // this.uploadList.push(file)\r\n          this.value.push(file)\r\n        }\r\n        console.log(this.value)\r\n        this.hiddenUpload = true // 隐藏上传选择按钮\r\n        return false\r\n      },\r\n      // 文件删除\r\n      handleRemove(file) {\r\n        this.uploadList.splice(this.uploadList.indexOf(file), 1)\r\n        this.hiddenUpload = false\r\n      }\r\n    },\r\n    // 监测父元素里数据的变动更新子组件\r\n  \twatch: {\r\n\t    value (data) {\r\n        // console.log(data)\r\n        if(data.length){\r\n          this.uploadList = data \r\n          this.hiddenUpload = true\r\n        }else{\r\n          this.uploadList = []\r\n          this.hiddenUpload = false\r\n        }\r\n\t    }\r\n  \t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.image-upload{\r\n    .preview-list{\r\n        display: inline-block;\r\n        width: 80px;\r\n        height: 80px;\r\n        text-align: center;\r\n        line-height: 80px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .preview-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .preview-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .preview-list:hover .preview-list-cover{\r\n        display: block;\r\n    }\r\n    .preview-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n    .upload-tip{\r\n      li{\r\n        font-size: 12px;\r\n        color: #949393;\r\n        line-height: 18px;\r\n      }\r\n    }\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/upload/image-upload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-upload\"},[_vm._l((_vm.uploadList),function(item){return _c('div',{key:item.name,staticClass:\"preview-list\"},[(item.url)?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"preview-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.name)}}}),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:_vm._e()],2)}),_vm._v(\" \"),(!_vm.hiddenUpload)?_c('Upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"width\":\"78px\"},attrs:{\"action\":_vm.uploadPath,\"type\":\"drag\",\"accept\":\".jpg, .jpeg, .png\",\"show-upload-list\":false,\"before-upload\":_vm.handleBeforeUpload}},[_c('div',{staticStyle:{\"width\":\"78px\",\"height\":\"78px\",\"line-height\":\"78px\"}},[_c('Icon',{attrs:{\"type\":\"camera\",\"size\":\"20\"}})],1)]):_vm._e(),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"头像预览\"},on:{\"on-visible-change\":_vm.modelVisibleChange},model:{value:(_vm.previewModal),callback:function ($$v) {_vm.previewModal=$$v},expression:\"previewModal\"}},[(_vm.previewModal)?_c('img',{staticStyle:{\"width\":\"500px\"},attrs:{\"src\":_vm.uploadList[0].url}}):_vm._e()])],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"upload-tip\"},[_c('li',[_vm._v(\"每次只能上传1张图片。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"每个文件大小不超过 500kb。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"文件必须是 jpg 、png 或 jpeg 格式的图片。\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8aac9684\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/upload/image-upload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8aac9684\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./image-upload.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./image-upload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./image-upload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8aac9684\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./image-upload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/upload/image-upload.vue\n// module id = null\n// module chunks = ","<style scoped lang=\"less\">\r\n\t@import \"./user.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"user\">\r\n  \t<Row :gutter=\"20\">\r\n     \t<Col :sm=\"8\" :md=\"6\" :lg=\"4\">\r\n     \t\t<Input v-model=\"queryName\" placeholder=\"请输入用户名称\"></Input>\r\n     \t</Col>\r\n \t  \t<Col :sm=\"7\" :md=\"5\" :lg=\"3\">\r\n \t\t\t\t<Select v-model=\"queryAuth\" placeholder=\"请选择权限类型\">\r\n \t\t\t    <Option v-for=\"item in authList\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n \t\t\t  </Select>\r\n \t  \t</Col>\r\n     \t<Col :sm=\"8\" :md=\"8\" :lg=\"5\">\r\n     \t\t<Button type=\"primary\" icon=\"search\" shape=\"circle\" style=\"margin-right:10px;\" @click=\"query\">搜索</Button>\r\n     \t\t<Button type=\"primary\" icon=\"plus\" shape=\"circle\" @click=\"add\">新增</Button>\r\n     \t\t<Modal\r\n\t        v-model=\"userModal\"\r\n\t        :title=\"modalType===1?'新增管理员':'编辑管理员'\"\r\n\t\t\t\t\t@on-visible-change=\"modelVisibleChange\">\r\n\t        <Form ref=\"userFormObj\" :model=\"userForm\" :rules=\"userFormRule\" :label-width=\"100\">\r\n            <FormItem label=\"用户名\" prop=\"username\">\r\n              <Input type=\"text\" v-model=\"userForm.username\" placeholder=\"请输入用户名\" :disabled=\"modalType===1?false:true\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"密码\" prop=\"password\" v-if=\"modalType === 1\">\r\n              <Input type=\"password\" v-model=\"userForm.password\" placeholder=\"请输入密码\"></Input>\r\n            </FormItem>\r\n\t\t\t\t\t\t<div v-else>\r\n\t\t\t\t\t\t\t<FormItem label=\"原始密码\" prop=\"oldPwd\">\r\n\t\t\t\t\t\t\t\t<Input type=\"password\" v-model=\"userForm.oldPwd\" placeholder=\"请输入原始密码\"></Input>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t<FormItem label=\"新密码\" prop=\"newPwd\">\r\n\t\t\t\t\t\t\t\t<Input type=\"password\" v-model=\"userForm.newPwd\" placeholder=\"请输入新密码\"></Input>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t\t<FormItem label=\"确认密码\" prop=\"comfirmPwd\">\r\n\t\t\t\t\t\t\t\t<Input type=\"password\" v-model=\"userForm.comfirmPwd\" placeholder=\"请确认新密码\"></Input>\r\n\t\t\t\t\t\t\t</FormItem>\r\n\t\t\t\t\t\t</div>\r\n            <FormItem label=\"权限\" prop=\"auth\">\r\n            \t<!-- 注意userForm.auth是数字绑定双向不到option，要用字符串-->\r\n              <Select v-model=\"userForm.auth\" placeholder=\"请选择权限\">\r\n                  <Option value=\"1\">超级管理员</Option>\r\n                  <Option value=\"2\">管理员</Option>\r\n                  <Option value=\"3\">用户</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"头像\" prop=\"avator\">\r\n\t\t\t\t\t\t\t<!-- <div class=\"preview-list\" v-for=\"item in uploadList\" :key=\"item.name\">\r\n\t\t\t\t\t\t\t\t<template v-if=\"item.url\">\r\n\t\t\t\t\t\t\t\t\t<img :src=\"item.url\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"preview-list-cover\">\r\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.name)\"></Icon>\r\n\t\t\t\t\t\t\t\t\t\t<Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</div>\r\n              <Upload\r\n              \tv-if=\"!hiddenUpload\"\r\n              \t:action=\"uploadPath\"\r\n                ref=\"upload\"\r\n                type=\"drag\"\r\n                accept=\".jpg, .jpeg, .png\"\r\n                :show-upload-list=\"false\"\r\n                :before-upload=\"handleBeforeUpload\"\r\n                style=\"display: inline-block;width:80px;\">\r\n                <div style=\"width: 80px;height:80px;line-height: 80px;\">\r\n                  <Icon type=\"camera\" size=\"20\"></Icon>\r\n                </div>\r\n\t            </Upload>\r\n\t            <ul class=\"upload-tip\">\r\n\t            \t<li>每次只能上传1张图片。</li>\r\n\t\t\t\t\t\t\t\t<li>每个文件大小不超过 500kb。</li>\r\n\t\t\t\t\t\t\t\t<li>文件必须是 jpg 、png 或 jpeg 格式的图片。</li>\r\n\t            </ul>\r\n\t            <Modal title=\"头像预览\" v-model=\"previewModal\" @on-visible-change=\"previewChange\">\r\n                <img :src=\"uploadList[0].url\" v-if=\"previewModal\" style=\"width: 500px;\">\r\n              </Modal> -->\r\n              <imageUpload v-model=\"uploadList\" @showParentModel=\"showUserModel\"></imageUpload>\r\n            </FormItem>\r\n\t        </Form>\r\n\t        <div slot=\"footer\">\r\n\t\t\t\t\t\t<Button type=\"text\" @click=\"userModal=false\">取消</Button>\r\n            <Button type=\"primary\" :loading=\"modalLoading\" @click=\"addOrEdit\">提交</Button>\r\n          \t</div>\r\n \t\t    </Modal>\r\n     \t</Col>\r\n    </Row>\r\n    <baseTable \r\n\t\t\t@on-edit=\"edit\" \r\n\t\t\t@on-delete=\"remove\" \r\n\t\t\t@on-page-change=\"onCurrentPageChange\"\r\n\t\t\t@on-size-change=\"onPageSizeChange\"\r\n\t\t\t:columnList=\"tableColumn\" \r\n\t\t\t:total=\"total\"\r\n\t\t\t:currentPage=\"currentPage\"\r\n\t\t\t:pageSize=\"pageSize\"\r\n\t\t\t:loading=\"tableLoading\"\r\n\t\t\tv-model=\"tableData\">\r\n\t\t</baseTable>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getUser, addUser, deleteUser, addOrUpload, editOrUpload} from '@/api/user'\r\nimport moment from 'moment'\r\nimport allTableColumn from '@/common/js/table-column'\r\nimport baseTable from '@/components/table/base-table'\r\nimport imageUpload from '@/components/upload/image-upload'\r\nexport default {\r\n  name: 'user',\r\n  data(){\r\n  \treturn {\r\n\t  \tqueryName: '',\r\n\t  \tqueryAuth: '',\r\n\t  \ttableLoading: false,\r\n\t  \tuserModal: false,\r\n\t  \tmodalLoading: false,\r\n\t\t\tmodalType: 1, // 1为新增， 2为编辑\r\n\t  \tuserForm: { id:'', username: '', password: '', auth: '1', oldPwd: '', newPwd: '', comfirmPwd: ''},\r\n\t  \tuserFormRule: {\r\n\t  \t\tusername: [{ required: true, message: '用户名不能为空', trigger: 'blur' }],\r\n\t  \t\tpassword: [{ required: true, message: '密码不能为空', trigger: 'blur' }],\r\n\t  \t\toldPwd: [{ required: true, message: '原始密码不能为空', trigger: 'blur' }],\r\n\t  \t\tnewPwd: [{ required: true, message: '新密码不能为空', trigger: 'blur' }],\r\n\t  \t\tcomfirmPwd: [{ required: true, message: '确认密码不能为空', trigger: 'blur' }],\r\n\t  \t\tauth: [{ required: true, message: '请选择权限', trigger: 'change' }]\r\n\t  \t},\r\n\t\t  tableColumn: [],\r\n\t\t\ttableData: [],\r\n\t\t\ttotal: 0,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t  authList: [\r\n\t\t  {value: '4',label: '全部'},{value: '3',label: '用户'},{value: '2',label: '管理员'},{value: '1',label: '超级管理员'}\r\n\t\t  ],\r\n\t\t\tpreviewModal: false,\r\n\t\t\thiddenUpload: false, // 上传选择按钮\r\n\t\t\tuploadList: [],\r\n\t\t  uploadPath: `${process.env.BASE_API}/api/addOrUpload`\r\n\t  }\r\n\t},\r\n\tcreated(){\r\n\t\tthis._getColumn()\r\n\t},\r\n\tmounted(){\r\n\t\tthis.$nextTick(()=>{\r\n\t\t\tthis._getUser()\r\n\t\t\t// this.uploadList = this.$refs.upload.fileList // 存储上传文件对象\r\n\t\t\t// this.uploadList.push({\r\n\t\t\t// \t'name': 'a42bdcc1178e62b4694c830f028db5c0',\r\n\t\t\t// \t'url': 'https://o5wwk8baw.qnssl.com/a42bdcc1178e62b4694c830f028db5c0/avatar'\r\n\t\t\t// })\r\n\t\t})\r\n\t},\r\n\tmethods:{\r\n\t\t// 获取表格列配置\r\n\t\t_getColumn(){\r\n\t\t\tthis.tableColumn = allTableColumn.userTableColumn\r\n\t\t},\r\n\t\t_getUser(){\r\n\t\t\tthis.tableLoading = true\r\n\t\t\tlet params = {currentPage: this.currentPage, pageSize: this.pageSize, queryName: this.queryName, queryAuth: this.queryAuth}\r\n\t\t\tgetUser(params).then((res)=>{\r\n\t\t\t\t// console.log(res)\r\n\t\t\t\tif(res.data.success){\r\n\t\t\t\t\tthis.tableData = [...res.data.data.list]\r\n\t\t\t\t\tthis.total = res.data.data.pagination.total\r\n\t\t\t\t\tthis.currentPage = res.data.data.pagination.currentPage\r\n\t\t\t\t\tthis.pageSize = res.data.data.pagination.pageSize\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$Message.error(res.data.msg)\r\n\t\t\t\t}\r\n\t\t\t\tthis.tableLoading = false\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 表格当前页变化\r\n\t\tonCurrentPageChange(page){\r\n\t\t\tthis.currentPage = page\r\n\t\t\tthis._getUser()\r\n\t\t},\r\n\t\t// 表格每页显示大小变化\r\n\t\tonPageSizeChange(size){\r\n\t\t\tthis.currentPage = 1\r\n\t\t\tthis.pageSize = size\r\n\t\t\tthis._getUser()\r\n\t\t},\r\n\t\t// 详情\r\n\t\t// info(row, index){\r\n\t\t// \tconsole.log(row)\r\n\t\t// },\r\n\t\t// 打开新增弹窗\r\n    add(){\r\n    \tthis.userModal = true\r\n\t\t\tthis.modalType = 1\r\n    },\r\n\t\t// 弹窗状态变化\r\n\t\tmodelVisibleChange(status){\r\n\t\t\tif(!status) this.resetForm()\r\n\t\t},\r\n    // 搜索管理员\r\n    query(){\r\n    \tthis._getUser()\r\n    },\r\n\t\t// 打开编辑编辑\r\n\t\tedit(row, index){\r\n\t\t\t// console.log(row)\r\n      this.userModal = true\r\n\t\t\tthis.userForm.id = row._id\r\n      this.userForm.username = row.username\r\n      this.userForm.auth = String(row.auth) // iview下拉框值不能为数字必须是字符串\r\n\t\t\tif(row.avator){\r\n\t\t\t\tthis.uploadList.push({\r\n\t\t\t\t\t'name': row.username,\r\n\t\t\t\t\t'url': `${process.env.BASE_API}/${row.avator}`\r\n\t\t\t\t})\r\n\t\t\t\tthis.hiddenUpload = true\r\n\t\t\t} \r\n\t\t\tthis.modalType = 2\r\n\t  },\r\n    // 删除\r\n    remove(row, index){\r\n      deleteUser(row._id).then(res=>{\r\n      \tif(res.data.success){\r\n      \t\tthis._getUser()\r\n      \t\tthis.$Message.success(res.data.msg)\r\n      \t}else{\r\n      \t\tthis.$Message.success(res.data.msg)\r\n      \t}\r\n      })\r\n    },\r\n    // 新增管理员\r\n    addOrEdit(){\r\n    \t// console.log(this.userForm)\r\n      // addUser(this.userForm).then((res)=>{\r\n      // \t// console.log(res)\r\n      // \tif(res.data.success){\r\n      // \t\tthis.modalLoading = false\r\n      // \t\tthis.userModal = false\r\n      // \t\tthis.resetForm()\r\n      // \t\tthis._getUser()\r\n      // \t\tthis.$Message.success(res.data.msg)\r\n      // \t}else{\r\n      // \t\tthis.$Message.error(res.data.msg)\r\n      // \t}\r\n\t\t\t// })\r\n\t\t\tthis.$refs['userFormObj'].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.modalLoading = true\r\n\t\t\t\t\tlet formData = new FormData()\r\n\t\t\t\t\tif(this.uploadList.length){\r\n\t\t\t\t\t\tformData.append('file', this.uploadList[0])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tformData.append('username', this.userForm.username)\r\n\t\t\t\t\tformData.append('auth', this.userForm.auth)\r\n\t\t\t\t\tif(this.modalType === 1){\r\n\t\t\t\t\t\tformData.append('password', this.userForm.password)\r\n\t\t\t\t\t\taddOrUpload(formData).then(res => {\r\n\t\t\t\t\t\t\tif(res.data.success){\r\n\t\t\t\t\t\t\t\tthis.modalLoading = false\r\n\t\t\t\t\t\t\t\tthis.userModal = false\r\n\t\t\t\t\t\t\t\tthis.resetForm()\r\n\t\t\t\t\t\t\t\tthis._getUser()\r\n\t\t\t\t\t\t\t\tthis.$Message.success(res.data.msg)\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.modalLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Message.error(res.data.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tformData.append('id', this.userForm.id)\r\n\t\t\t\t\t\tformData.append('oldPwd', this.userForm.oldPwd)\r\n\t\t\t\t\t\tformData.append('newPwd', this.userForm.newPwd)\r\n\t\t\t\t\t\tformData.append('comfirmPwd', this.userForm.comfirmPwd)\r\n\t\t\t\t\t\teditOrUpload(formData).then(res => {\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\tif(res.data.success){\r\n\t\t\t\t\t\t\t\tthis.modalLoading = false\r\n\t\t\t\t\t\t\t\tthis.userModal = false\r\n\t\t\t\t\t\t\t\tthis.resetForm()\r\n\t\t\t\t\t\t\t\tthis._getUser()\r\n\t\t\t\t\t\t\t\tthis.$Message.success(res.data.msg)\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.modalLoading = false\r\n\t\t\t\t\t\t\t\tthis.$Message.error(res.data.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$Message.error('请正确输入表单内容！')\r\n\t\t\t\t}\r\n\t\t\t})\r\n    },\r\n    resetForm(){\r\n    \tthis.$refs.userFormObj.resetFields() //重置表单\r\n\t\t\tthis.userForm.auth = '1'\r\n\t\t\tthis.userForm.password = ''\r\n\t\t\tthis.userForm.id = ''\r\n\t\t\tthis.userForm.oldPwd = ''\r\n\t\t\tthis.userForm.newPwd = ''\r\n\t\t\tthis.userForm.comfirmPwd = ''\r\n    \tthis.hiddenUpload = false \r\n    \tthis.uploadList = [] // 重置上传列表\r\n\t\t},\r\n\t\t// reloadTable(){},\r\n\t\t// 上传图片处理\r\n\t\t// 预览窗口切换\r\n\t\tshowUserModel(value){\r\n\t\t\tthis.userModal = value\r\n\t\t},\r\n    // 上传图片预览\r\n    // handleView (name) {\r\n    //   this.imgName = name\r\n    //   this.previewModal = true\r\n    //   this.userModal = false\r\n    // },\r\n    // 预览窗口切换\r\n    // previewChange(status){\r\n    // \tthis.userModal = status ? false : true\r\n    // },\r\n    // 图片上传\r\n    // 绑定 before-upload，并返回false，可以阻止默认上传流程，实现手动控制文件上传\r\n    // 手动上传导致iview的upload组件before-upload后面触发的事件都无法执行\r\n    // handleBeforeUpload(file){\r\n\t\t// \tconsole.log(file)\r\n\t\t// \tif(file.size > 500*1000){\r\n\t  //   \tthis.$Notice.warning({\r\n\t\t//       title: '超出文件大小限制',\r\n\t\t//       desc: '文件 ' + file.name + ' 太大，不能超过 500kb。'\r\n\t\t//     })\r\n\t\t//     return false\r\n\t\t// \t}\r\n\t\t// \tthis.uploadList = []\r\n    //   let reader = new FileReader() // 读取文件对象\r\n    //   // readAsDataURL 方法用于读取指定 Blob 或 File 的内容\r\n    //   // 当读操作完成，readyState 变为 DONE，loadend 被触发，此时 result 属性包含数据：URL（以 base64 编码的字符串表示文件的数据）\r\n    //   // 读取文件作为 URL 可访问地址\r\n    //   reader.readAsDataURL(file)\r\n    //   reader.onloadend = e => {\r\n    //     file.url = reader.result\r\n    //     this.uploadList.push(file)\r\n    //   }\r\n    //   this.hiddenUpload = true // 隐藏上传选择按钮\r\n    //   return false\r\n\t\t// },\r\n    // 文件删除\r\n    // handleRemove(file) {\r\n    //   this.uploadList.splice(this.uploadList.indexOf(file), 1)\r\n    //   this.hiddenUpload = false\r\n    // },\r\n\t},\r\n\tcomponents:{\r\n\t\tbaseTable,\r\n\t\timageUpload\r\n\t}\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user\"},[_c('Row',{attrs:{\"gutter\":20}},[_c('Col',{attrs:{\"sm\":8,\"md\":6,\"lg\":4}},[_c('Input',{attrs:{\"placeholder\":\"请输入用户名称\"},model:{value:(_vm.queryName),callback:function ($$v) {_vm.queryName=$$v},expression:\"queryName\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"sm\":7,\"md\":5,\"lg\":3}},[_c('Select',{attrs:{\"placeholder\":\"请选择权限类型\"},model:{value:(_vm.queryAuth),callback:function ($$v) {_vm.queryAuth=$$v},expression:\"queryAuth\"}},_vm._l((_vm.authList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}))],1),_vm._v(\" \"),_c('Col',{attrs:{\"sm\":8,\"md\":8,\"lg\":5}},[_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\",\"icon\":\"search\",\"shape\":\"circle\"},on:{\"click\":_vm.query}},[_vm._v(\"搜索\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"plus\",\"shape\":\"circle\"},on:{\"click\":_vm.add}},[_vm._v(\"新增\")]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modalType===1?'新增管理员':'编辑管理员'},on:{\"on-visible-change\":_vm.modelVisibleChange},model:{value:(_vm.userModal),callback:function ($$v) {_vm.userModal=$$v},expression:\"userModal\"}},[_c('Form',{ref:\"userFormObj\",attrs:{\"model\":_vm.userForm,\"rules\":_vm.userFormRule,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入用户名\",\"disabled\":_vm.modalType===1?false:true},model:{value:(_vm.userForm.username),callback:function ($$v) {_vm.$set(_vm.userForm, \"username\", $$v)},expression:\"userForm.username\"}})],1),_vm._v(\" \"),(_vm.modalType === 1)?_c('FormItem',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.userForm.password),callback:function ($$v) {_vm.$set(_vm.userForm, \"password\", $$v)},expression:\"userForm.password\"}})],1):_c('div',[_c('FormItem',{attrs:{\"label\":\"原始密码\",\"prop\":\"oldPwd\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入原始密码\"},model:{value:(_vm.userForm.oldPwd),callback:function ($$v) {_vm.$set(_vm.userForm, \"oldPwd\", $$v)},expression:\"userForm.oldPwd\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"新密码\",\"prop\":\"newPwd\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.userForm.newPwd),callback:function ($$v) {_vm.$set(_vm.userForm, \"newPwd\", $$v)},expression:\"userForm.newPwd\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"确认密码\",\"prop\":\"comfirmPwd\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"请确认新密码\"},model:{value:(_vm.userForm.comfirmPwd),callback:function ($$v) {_vm.$set(_vm.userForm, \"comfirmPwd\", $$v)},expression:\"userForm.comfirmPwd\"}})],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"权限\",\"prop\":\"auth\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择权限\"},model:{value:(_vm.userForm.auth),callback:function ($$v) {_vm.$set(_vm.userForm, \"auth\", $$v)},expression:\"userForm.auth\"}},[_c('Option',{attrs:{\"value\":\"1\"}},[_vm._v(\"超级管理员\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"2\"}},[_vm._v(\"管理员\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"3\"}},[_vm._v(\"用户\")])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"头像\",\"prop\":\"avator\"}},[_c('imageUpload',{on:{\"showParentModel\":_vm.showUserModel},model:{value:(_vm.uploadList),callback:function ($$v) {_vm.uploadList=$$v},expression:\"uploadList\"}})],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.userModal=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.modalLoading},on:{\"click\":_vm.addOrEdit}},[_vm._v(\"提交\")])],1)],1)],1)],1),_vm._v(\" \"),_c('baseTable',{attrs:{\"columnList\":_vm.tableColumn,\"total\":_vm.total,\"currentPage\":_vm.currentPage,\"pageSize\":_vm.pageSize,\"loading\":_vm.tableLoading},on:{\"on-edit\":_vm.edit,\"on-delete\":_vm.remove,\"on-page-change\":_vm.onCurrentPageChange,\"on-size-change\":_vm.onPageSizeChange},model:{value:(_vm.tableData),callback:function ($$v) {_vm.tableData=$$v},expression:\"tableData\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78890a03\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78890a03\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./user.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78890a03\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-78890a03\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/user.vue\n// module id = null\n// module chunks = ","import ax from './interceptors'\r\nlet qs = require('qs')\r\n\r\n// 添加用户\r\n// export async function addUser(data) {\r\n// \tconst url = '/api/addUser';\r\n// \treturn await ax.post(url,data)\r\n// }\r\n\r\nexport async function addUser(data) {\r\n\tlet url = '/addUser'\r\n\treturn await ax({\r\n\t\turl,\r\n\t\tmethod: 'post',\r\n\t\t// 传参方式: post方式用 data: {...params} ，get方式用 params: {...params}\r\n\t\tdata: qs.stringify({...data}) // Form Data方式请求，Content-Type:application/x-www-form-urlencoded\r\n\t\t// data: {...data}  // Request Payload方式请求，Content-Type:application/json（axios默认的传值方式）\r\n\t})\r\n}\r\n\r\n// 根据搜索条件获取用户，默认加载全部 \r\nexport async function getUser(params){\r\n\treturn await ax({\r\n\t\turl: '/getUser',\r\n\t\tmethod: 'get',\r\n\t\t// 传参方式: post方式用 data: {...params} ，get方式用 params: {...params}\r\n\t\tparams: {...params}\r\n\t})\r\n}\r\n\r\n// 删除用户\r\nexport async function deleteUser(data){\r\n\treturn await ax({\r\n\t\turl: `/deleteUser/${data}`,\r\n\t\tmethod: 'delete'\r\n\t})\r\n}\r\n\r\n// 新增上传头像用户\r\nexport async function addOrUpload(data){\r\n\treturn await ax({\r\n\t\theaders: { 'Content-Type': 'multipart/form-data' },\r\n\t\turl: `/addOrUpload`,\r\n\t\tmethod: 'post',\r\n\t\tdata: data\r\n\t})\r\n}\r\n\r\n// 编辑上传头像用户\r\nexport async function editOrUpload(data) {\r\n\treturn await ax({\r\n\t\theaders: { 'Content-Type': 'multipart/form-data' },\r\n\t\turl: `/editOrUpload`,\r\n\t\tmethod: 'put',\r\n\t\tdata: data\r\n\t})\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js"],"sourceRoot":""}