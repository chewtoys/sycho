webpackJsonp([6],{dUCO:function(e,t){},l27P:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i,s,o=a("Gu7T"),l=a.n(o),u=a("JGfi"),c=a("G5DY"),d=a("Xxa5"),m=a.n(d),p=a("Dd8w"),g=a.n(p),h=a("exGp"),k=a.n(h),f=a("qP6z"),v=a("mw3O"),b=(n=k()(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({url:"/getLink",method:"get",params:g()({},t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),y=(r=k()(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({url:"/addLink",method:"post",data:v.stringify(g()({},t))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),_=(i=k()(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({url:"/deleteLink/"+t,method:"delete"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),F=(s=k()(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)({url:"/editLink",method:"put",data:v.stringify(g()({},t))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)}),L={name:"v-link",data:function(){return{queryName:"",queryType:"",optionList:[{value:"0",label:"全部"},{value:"1",label:"技术"},{value:"2",label:"生活"},{value:"3",label:"购物"},{value:"4",label:"时事"}],linkModal:!1,tableLoading:!1,currentPage:1,pageSize:10,total:0,tableColumn:[],tableData:[],linkFormData:{id:"",name:"",type:"1",address:""},linkFormRule:{name:[{required:!0,message:"链接名不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择链接类型",trigger:"change"}],address:[{required:!0,message:"链接地址不能为空",trigger:"blur"}]},modelType:1,modalLoading:!1}},created:function(){this.tableColumn=u.a.linkTableColumn},mounted:function(){var e=this;this.$nextTick(function(){e._getLink()})},methods:{_getLink:function(){var e=this;this.tableLoading=!0;var t={currentPage:this.currentPage,pageSize:this.pageSize,queryName:this.queryName,queryType:this.queryType};b(t).then(function(t){console.log(t),t.data.success?(e.tableData=[].concat(l()(t.data.data.list)),e.total=t.data.data.pagination.total,e.currentPage=t.data.data.pagination.currentPage,e.pageSize=t.data.data.pagination.pageSize):e.$Message.error(t.data.msg),e.tableLoading=!1})},onCurrentPageChange:function(e){this.currentPage=e,this._getLink()},onPageSizeChange:function(e){this.currentPage=1,this.pageSize=e,this._getLink()},search:function(){1===this.currentPage?this._getLink():this.currentPage=1},add:function(){this.modelType=1,this.linkModal=!0},edit:function(e,t){console.log(e),this.modelType=2,this.linkModal=!0,this.linkFormData.id=e._id,this.linkFormData.name=e.name,this.linkFormData.type=e.type,this.linkFormData.address=e.address},modelVisibleChange:function(e){e||this.resetForm()},addOrEdit:function(){var e=this;this.$refs.linkForm.validate(function(t){t?(e.modalLoading=!0,1===e.modelType?y(e.linkFormData).then(function(t){console.log(t),e.modalLoading=!1,t.data.success?(e.linkModal=!1,e.resetForm(),e._getLink(),e.$Message.success(t.data.msg)):e.$Message.error(t.data.msg)}):F(e.linkFormData).then(function(t){console.log(t),e.modalLoading=!1,t.data.success?(e.linkModal=!1,e.resetForm(),e._getLink(),e.$Message.success(t.data.msg)):e.$Message.error(t.data.msg)})):e.$Message.error("请正确输入表单内容！")})},remove:function(e,t){var a=this;_(e._id).then(function(e){e.data.success?(a._getLink(),a.$Message.success(e.data.msg)):a.$Message.success(e.data.msg)})},resetForm:function(){this.$refs.linkForm.resetFields()}},components:{baseTable:c.a}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"link"},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{sm:8,md:6,lg:4}},[a("Input",{attrs:{placeholder:"请输入链接名称"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}})],1),e._v(" "),a("Col",{attrs:{sm:7,md:5,lg:3}},[a("Select",{attrs:{placeholder:"请选择链接类型"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},e._l(e.optionList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("Col",{attrs:{sm:8,md:8,lg:5}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"search",shape:"circle"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{attrs:{type:"primary",icon:"plus",shape:"circle"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("Modal",{attrs:{title:1==e.modelType?"新增链接":"编辑链接"},on:{"on-visible-change":e.modelVisibleChange},model:{value:e.linkModal,callback:function(t){e.linkModal=t},expression:"linkModal"}},[a("Form",{ref:"linkForm",attrs:{model:e.linkFormData,rules:e.linkFormRule,"label-width":80}},[a("FormItem",{attrs:{label:"名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入链接名称"},model:{value:e.linkFormData.name,callback:function(t){e.$set(e.linkFormData,"name",t)},expression:"linkFormData.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Select",{attrs:{placeholder:"请选择链接类型"},model:{value:e.linkFormData.type,callback:function(t){e.$set(e.linkFormData,"type",t)},expression:"linkFormData.type"}},e._l(e.optionList,function(t,n){return 0!=n?a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))]):e._e()}))],1),e._v(" "),a("FormItem",{attrs:{label:"地址",prop:"address"}},[a("Input",{attrs:{placeholder:"请输入链接名称"},model:{value:e.linkFormData.address,callback:function(t){e.$set(e.linkFormData,"address",t)},expression:"linkFormData.address"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.linkModal=!1}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",loading:e.modalLoading},on:{click:e.addOrEdit}},[e._v("提交")])],1)],1)],1)],1),e._v(" "),a("baseTable",{attrs:{columnList:e.tableColumn,total:e.total,currentPage:e.currentPage,pageSize:e.pageSize,loading:e.tableLoading},on:{"on-edit":e.edit,"on-delete":e.remove,"on-page-change":e.onCurrentPageChange,"on-size-change":e.onPageSizeChange},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}})],1)},staticRenderFns:[]};var x=a("VU/8")(L,D,!1,function(e){a("dUCO")},"data-v-578c766c",null);t.default=x.exports}});
//# sourceMappingURL=6.7f4eddf5664ff3c9a1f1.js.map